---
import BaseLayout from '@/layouts/BaseLayout.astro';
import SectionHeader from '@/components/SectionHeader.astro';
import Button from '@/components/Button.astro';
import siteData from '@/data/site.json';
import { getCollection } from 'astro:content';

const team = await getCollection('team');
const sortedTeam = team.sort((a, b) => (a.data.order || 0) - (b.data.order || 0));
const { sections, company } = siteData;
---

<BaseLayout title="About Us">
  <!-- Hero -->
  <section class="pt-28 pb-16 bg-gradient-to-b from-sand-50 to-white">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl">
        <span class="text-sm font-semibold text-primary-600 uppercase tracking-wider">About</span>
        <h1 class="mt-3 font-display text-4xl sm:text-5xl lg:text-6xl font-bold text-slate-900 leading-tight">
          {sections.about?.headline || "About Us"}
        </h1>
        <p class="mt-6 text-xl text-slate-600 leading-relaxed">
          {company.description}
        </p>
      </div>
    </div>
  </section>

  <!-- Story Section -->
  <section class="py-24 bg-white">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid lg:grid-cols-2 gap-12 lg:gap-20 items-center">
        <div class="relative">
          <div class="aspect-[4/5] rounded-2xl overflow-hidden bg-gradient-to-br from-primary-50 to-accent-50">
            <div class="w-full h-full flex items-center justify-center">
              <svg class="w-32 h-32 text-primary-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="0.5" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
              </svg>
            </div>
          </div>
          <div class="absolute -bottom-6 -right-6 w-40 h-40 bg-accent-100 rounded-2xl -z-10"></div>
        </div>
        <div>
          <span class="text-sm font-semibold text-primary-600 uppercase tracking-wider">Our Story</span>
          <h2 class="mt-3 font-display text-3xl sm:text-4xl font-bold text-slate-900 leading-tight">
            A different approach to advisory
          </h2>
          <div class="mt-6 prose prose-slate prose-lg">
            <p class="text-lg text-slate-600 leading-relaxed">
              {sections.about?.content}
            </p>
            <p class="text-slate-600 leading-relaxed">
              We believe that clarity is the foundation of good strategy. Our engagements start with understanding—
              the market, the team, the constraints. From there, we help leadership make the hard choices explicit, 
              build operating discipline, and execute with confidence.
            </p>
          </div>
          {company.founded && (
            <div class="mt-8 flex items-center gap-6">
              <div class="text-center">
                <p class="font-display text-3xl font-bold text-primary-600">{company.founded}</p>
                <p class="text-sm text-slate-500">Founded</p>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  </section>

  <!-- Values Section -->
  {sections.about?.values && (
    <section class="py-24 bg-sand-50">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <SectionHeader 
          headline="Our Values" 
          description="The principles that guide how we work with clients"
        />
        
        <div class="mt-14 grid md:grid-cols-3 gap-8">
          {sections.about.values.map((value, index) => (
            <div class="bg-white rounded-2xl p-8 shadow-sm border border-slate-100">
              <div class="w-12 h-12 bg-primary-600 rounded-xl flex items-center justify-center mb-6">
                <span class="font-display text-xl font-bold text-white">
                  {String(index + 1).padStart(2, '0')}
                </span>
              </div>
              <h3 class="font-display text-xl font-bold text-slate-900">
                {value.title}
              </h3>
              <p class="mt-3 text-slate-600 leading-relaxed">
                {value.description}
              </p>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Approach Section -->
  <section class="py-24 bg-white">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto text-center">
        <span class="text-sm font-semibold text-primary-600 uppercase tracking-wider">Our Approach</span>
        <h2 class="mt-3 font-display text-3xl sm:text-4xl font-bold text-slate-900">
          How we work
        </h2>
        <p class="mt-6 text-lg text-slate-600 leading-relaxed">
          We believe in deep partnership over surface-level advice. Every engagement is hands-on, 
          iterative, and focused on decisions that move the needle.
        </p>
      </div>
      
      <div class="mt-16 grid md:grid-cols-3 gap-12">
        <div class="text-center">
          <div class="mx-auto w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mb-5">
            <svg class="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
            </svg>
          </div>
          <h3 class="font-display text-lg font-bold text-slate-900">Understand</h3>
          <p class="mt-2 text-slate-600 text-sm leading-relaxed">
            We start by listening—to the business, the market, and the team. We surface the real constraints and opportunities.
          </p>
        </div>
        <div class="text-center">
          <div class="mx-auto w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mb-5">
            <svg class="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
            </svg>
          </div>
          <h3 class="font-display text-lg font-bold text-slate-900">Clarify</h3>
          <p class="mt-2 text-slate-600 text-sm leading-relaxed">
            We help make the hard choices explicit—what to do, what not to do—so the whole team can align and execute.
          </p>
        </div>
        <div class="text-center">
          <div class="mx-auto w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mb-5">
            <svg class="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
          </div>
          <h3 class="font-display text-lg font-bold text-slate-900">Execute</h3>
          <p class="mt-2 text-slate-600 text-sm leading-relaxed">
            We stay engaged through implementation, helping build the operating systems and discipline to make strategy stick.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Team Section -->
  {sortedTeam.length > 0 && (
    <section id="team" class="py-24 bg-sand-50">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <SectionHeader 
          headline={sections.team?.headline || "Leadership"} 
          description={sections.team?.description}
        />
        
        <div class="mt-14 grid md:grid-cols-2 lg:grid-cols-3 gap-10">
          {sortedTeam.map(async (member) => {
            const { Content } = await member.render();
            return (
              <div class="bg-white rounded-2xl overflow-hidden shadow-sm border border-slate-100">
                <div class="aspect-[4/3] overflow-hidden bg-gradient-to-br from-primary-50 to-accent-50">
                  {member.data.image ? (
                    <img 
                      src={member.data.image} 
                      alt={member.data.name}
                      class="w-full h-full object-cover"
                    />
                  ) : (
                    <div class="w-full h-full flex items-center justify-center">
                      <svg class="w-24 h-24 text-primary-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                      </svg>
                    </div>
                  )}
                </div>
                <div class="p-6">
                  <h3 class="font-display text-xl font-bold text-slate-900">
                    {member.data.name}
                  </h3>
                  <p class="mt-1 text-primary-600 font-medium">{member.data.role}</p>
                  {member.data.location && (
                    <p class="mt-1 text-sm text-slate-500">{member.data.location}</p>
                  )}
                  {member.data.bio && (
                    <p class="mt-4 text-slate-600 text-sm leading-relaxed">
                      {member.data.bio}
                    </p>
                  )}
                  <div class="mt-4 flex gap-3">
                    {member.data.email && (
                      <a 
                        href={`mailto:${member.data.email}`}
                        class="text-slate-400 hover:text-primary-600 transition-colors"
                      >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                      </a>
                    )}
                    {member.data.linkedin && (
                      <a 
                        href={member.data.linkedin}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-slate-400 hover:text-primary-600 transition-colors"
                      >
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                      </a>
                    )}
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </section>
  )}

  <!-- CTA Section -->
  <section class="py-24 bg-primary-800">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="font-display text-3xl sm:text-4xl font-bold text-white">
        Ready to start a conversation?
      </h2>
      <p class="mt-6 text-xl text-primary-100">
        Tell us what you're building. We'd love to learn more.
      </p>
      <div class="mt-10">
        <Button href="/contact" style="white" size="lg">
          Get in touch
        </Button>
      </div>
    </div>
  </section>
</BaseLayout>
